<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desvendando o Enigma Gal√°ctico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-image: url('/api/placeholder/1920/1080');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
            display: flex;
            overflow-x: hidden;
        }

        .container {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            width: 450px;
            max-width: 90%;
            margin-left: 5%;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            align-self: center;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #90feb5;
            text-shadow: 0 0 10px rgba(144, 254, 181, 0.7);
        }

        .input-area {
            margin-bottom: 2rem;
        }

        input {
            width: 100%;
            padding: 15px;
            margin-bottom: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(144, 254, 181, 0.5);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            text-align: center;
        }

        input:focus {
            outline: none;
            border-color: #90feb5;
            box-shadow: 0 0 15px rgba(144, 254, 181, 0.5);
        }

        .buttons-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .result-area {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(144, 254, 181, 0.3);
        }

        .result-text {
            font-size: 1.5rem;
            color: #90feb5;
            text-shadow: 0 0 10px rgba(144, 254, 181, 0.5);
        }

        .loading {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #90feb5;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 10px;
            display: none;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .instructions {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        .error {
            color: #ff6b6b;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            text-align: center;
            display: none;
        }

        /* Anima√ß√£o do bot√£o */
        .button {
            -webkit-font-smoothing: antialiased;
            background-color: #222;
            border: none;
            color: #fff;
            display: inline-block;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 100;
            text-decoration: none;
            user-select: none;
            letter-spacing: 1px;
            color: white;
            padding: 20px 40px;
            text-transform: uppercase;
            transition: all 0.1s ease-out;
            cursor: pointer;
        }

        .button:hover {
            background-color: #90feb5;
            color: #fff;
        }

        .button:active {
            transform: scale(0.95);
        }

        .button--bubble {
            position: relative;
            z-index: 2;
            color: white;
            background: none;
        }

        .button--bubble:hover {
            background: none;
        }

        .button--bubble:hover+.button--bubble__effect-container .circle {
            background: #68d490;
        }

        .button--bubble:hover+.button--bubble__effect-container .button {
            background: #68d490;
        }

        .button--bubble:active+.button--bubble__effect-container {
            transform: scale(0.95);
        }

        .button--bubble__container {
            position: relative;
            display: inline-block;
        }

        .button--bubble__container .effect-button {
            position: absolute;
            width: 50%;
            height: 25%;
            top: 50%;
            left: 25%;
            z-index: 1;
            transform: translateY(-50%);
            background: #222;
            transition: background 0.1s ease-out;
        }

        .button--bubble__effect-container {
            position: absolute;
            display: block;
            width: 200%;
            height: 400%;
            top: -150%;
            left: -50%;
            -webkit-filter: url("#goo");
            filter: url("#goo");
            transition: all 0.1s ease-out;
            pointer-events: none;
        }

        .button--bubble__effect-container .circle {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 15px;
            background: #222;
            transition: background 0.1s ease-out;
        }

        .button--bubble__effect-container .circle.top-left {
            top: 40%;
            left: 27%;
        }

        .button--bubble__effect-container .circle.bottom-right {
            bottom: 40%;
            right: 27%;
        }

        .goo {
            position: absolute;
            visibility: hidden;
            width: 1px;
            height: 1px;
        }

        .button--bubble__container {
            top: 50%;
            margin-top: -25px;
        }

        /* Anima√ß√£o de cores */
        @keyframes hue-rotate {
            from {
                -webkit-filter: hue-rotate(0);
                -moz-filter: hue-rotate(0);
                -ms-filter: hue-rotate(0);
                filter: hue-rotate(0);
            }

            to {
                -webkit-filter: hue-rotate(360deg);
                -moz-filter: hue-rotate(360deg);
                -ms-filter: hue-rotate(360deg);
                filter: hue-rotate(360deg);
            }
        }

        .animate-hue {
            animation: hue-rotate 10s linear infinite;
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .container {
                margin: 0 auto;
                padding: 30px;
                width: 90%;
            }

            h1 {
                font-size: 1.8rem;
            }

            .buttons-container {
                flex-direction: column;
                gap: 15px;
            }

            .button--bubble__container {
                width: 100%;
            }

            .button {
                width: 100%;
                padding: 15px 20px;
                font-size: 12px;
            }
        }
    </style>
</head>

<body>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="goo">
        <defs>
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9"
                    result="goo" />
                <feComposite in="SourceGraphic" in2="goo" />
            </filter>
        </defs>
    </svg>

    <div class="container animate-hue">
        <h1>Desvendando o Enigma Gal√°ctico üöÄüëΩ</h1>

        <div class="input-area">
            <input type="text" id="enigma-input" placeholder="Digite o c√≥digo alien√≠gena (ex: 385189)" maxlength="10">
            <div class="error" id="error-message">Por favor, insira apenas n√∫meros</div>
        </div>

        <div class="buttons-container">
            <span class="button--bubble__container">
                <a href="#" id="decifrar-btn" class="button button--bubble">
                    Decifrar
                </a>
                <span class="button--bubble__effect-container">
                    <span class="circle top-left"></span>
                    <span class="circle top-left"></span>
                    <span class="circle top-left"></span>
                    <span class="button effect-button"></span>
                    <span class="circle bottom-right"></span>
                    <span class="circle bottom-right"></span>
                    <span class="circle bottom-right"></span>
                </span>
            </span>

            <span class="button--bubble__container">
                <a href="#" id="retornar-btn" class="button button--bubble">
                    Retornar
                </a>
                <span class="button--bubble__effect-container">
                    <span class="circle top-left"></span>
                    <span class="circle top-left"></span>
                    <span class="circle top-left"></span>
                    <span class="button effect-button"></span>
                    <span class="circle bottom-right"></span>
                    <span class="circle bottom-right"></span>
                    <span class="circle bottom-right"></span>
                </span>
            </span>
        </div>

        <div class="result-area">
            <div class="loading" id="loading"></div>
            <div class="result-text" id="result">Digite o c√≥digo e pressione "Decifrar"</div>
        </div>

        <div class="instructions">
            Insira uma sequ√™ncia de n√∫meros para descobrir a mensagem alien√≠gena secreta.
            <br>
            Os subconjuntos ser√£o calculados e a resposta revelar√° o enigma!
        </div>
    </div>

    <script>
        // C√≥digo JavaScript para resolver o enigma
        document.addEventListener('DOMContentLoaded', function () {
            // Aplicar a anima√ß√£o de bolhas nos bot√µes
            setupButtonAnimation('.button--bubble');

            // Refer√™ncias aos elementos
            const input = document.getElementById('enigma-input');
            const decifrarBtn = document.getElementById('decifrar-btn');
            const retornarBtn = document.getElementById('retornar-btn');
            const result = document.getElementById('result');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('error-message');

            // Eventos
            decifrarBtn.addEventListener('click', decifrarEnigma);
            retornarBtn.addEventListener('click', retornar);
            input.addEventListener('input', validarInput);

            // Validar entrada para permitir apenas n√∫meros
            function validarInput() {
                if (!/^\d*$/.test(input.value)) {
                    input.value = input.value.replace(/\D/g, '');
                    errorMessage.style.display = 'block';
                    setTimeout(() => {
                        errorMessage.style.display = 'none';
                    }, 2000);
                }
            }

            // Fun√ß√£o principal para decifrar o enigma
            function decifrarEnigma(e) {
                e.preventDefault();

                const codigo = input.value.trim();

                // Valida√ß√£o
                if (!codigo) {
                    mostrarErro('Por favor, insira o c√≥digo alien√≠gena');
                    return;
                }

                if (!/^\d+$/.test(codigo)) {
                    mostrarErro('O c√≥digo deve conter apenas n√∫meros');
                    return;
                }

                // Mostrar carregamento
                loading.style.display = 'block';
                result.textContent = 'Processando...';

                // Simular processamento (para efeito visual)
                setTimeout(() => {
                    // Algoritmo para resolver o desafio
                    const resposta = resolverEnigma(codigo);

                    // Mostrar resultado
                    loading.style.display = 'none';
                    result.innerHTML = `<span style="font-size:0.8rem">A solu√ß√£o do enigma √©:</span><br>${resposta}`;
                }, 1500);
            }

            // Fun√ß√£o para retornar (limpar campos)
            function retornar(e) {
                e.preventDefault();

                input.value = '';
                loading.style.display = 'none';
                result.textContent = 'Digite o c√≥digo e pressione "Decifrar"';
            }

            // Fun√ß√£o para exibir mensagens de erro
            function mostrarErro(mensagem) {
                errorMessage.textContent = mensagem;
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            }

            // Configurar anima√ß√£o dos bot√µes
            function setupButtonAnimation(selector) {
                document.querySelectorAll(selector).forEach(function (button) {
                    // Obter elementos para anima√ß√£o
                    const circlesTopLeft = button.parentElement.querySelector('.button--bubble__effect-container').querySelectorAll('.circle.top-left');
                    const circlesBottomRight = button.parentElement.querySelector('.button--bubble__effect-container').querySelectorAll('.circle.bottom-right');

                    // Criar timelines para anima√ß√£o usando GSAP
                    const tl = gsap.timeline();
                    const tl2 = gsap.timeline();
                    const btTl = gsap.timeline({ paused: true });

                    // Anima√ß√£o c√≠rculos superiores esquerdos
                    tl.to(circlesTopLeft, {
                        duration: 1.2,
                        x: -25,
                        y: -25,
                        scaleY: 2,
                        ease: "slow(0.1, 0.7, false)"
                    });
                    tl.to(circlesTopLeft[0], { duration: 0.1, scale: 0.2, x: "+=6", y: "-=2" });
                    tl.to(circlesTopLeft[1], { duration: 0.1, scaleX: 1, scaleY: 0.8, x: "-=10", y: "-=7" }, "-=0.1");
                    tl.to(circlesTopLeft[2], { duration: 0.1, scale: 0.2, x: "-=15", y: "+=6" }, "-=0.1");
                    tl.to(circlesTopLeft[0], { duration: 1, scale: 0, x: "-=5", y: "-=15", opacity: 0 });
                    tl.to(circlesTopLeft[1], { duration: 1, scaleX: 0.4, scaleY: 0.4, x: "-=10", y: "-=10", opacity: 0 }, "-=1");
                    tl.to(circlesTopLeft[2], { duration: 1, scale: 0, x: "-=15", y: "+=5", opacity: 0 }, "-=1");

                    const tlBt1 = gsap.timeline();
                    tlBt1.set(circlesTopLeft, { x: 0, y: 0, rotation: -45 });
                    tlBt1.add(tl);

                    // Anima√ß√£o c√≠rculos inferiores direitos
                    tl2.set(circlesBottomRight, { x: 0, y: 0 });
                    tl2.to(circlesBottomRight, {
                        duration: 1.1,
                        x: 30,
                        y: 30,
                        ease: "slow(0.1, 0.7, false)"
                    });
                    tl2.to(circlesBottomRight[0], { duration: 0.1, scale: 0.2, x: "-=6", y: "+=3" });
                    tl2.to(circlesBottomRight[1], { duration: 0.1, scale: 0.8, x: "+=7", y: "+=3" }, "-=0.1");
                    tl2.to(circlesBottomRight[2], { duration: 0.1, scale: 0.2, x: "+=15", y: "-=6" }, "-=0.2");
                    tl2.to(circlesBottomRight[0], { duration: 1, scale: 0, x: "+=5", y: "+=15", opacity: 0 });
                    tl2.to(circlesBottomRight[1], { duration: 1, scale: 0.4, x: "+=7", y: "+=7", opacity: 0 }, "-=1");
                    tl2.to(circlesBottomRight[2], { duration: 1, scale: 0, x: "+=15", y: "-=5", opacity: 0 }, "-=1");

                    const tlBt2 = gsap.timeline();
                    tlBt2.set(circlesBottomRight, { x: 0, y: 0, rotation: 45 });
                    tlBt2.add(tl2);

                    // Combinar as anima√ß√µes
                    btTl.add(tlBt1);
                    btTl.to(button.parentElement.querySelector('.button.effect-button'), {
                        duration: 0.8,
                        scaleY: 1.1
                    }, 0.1);
                    btTl.add(tlBt2, 0.2);
                    btTl.to(button.parentElement.querySelector('.button.effect-button'), {
                        duration: 1.8,
                        scale: 1,
                        ease: "elastic.out(1.2, 0.4)"
                    }, 1.2);

                    // Ajustar velocidade da anima√ß√£o
                    btTl.timeScale(2.6);

                    // Iniciar anima√ß√£o ao passar o mouse
                    button.addEventListener('mouseover', function () {
                        btTl.restart();
                    });
                });
            }

            /**
             * Fun√ß√£o para resolver o enigma gal√°ctico
             * @param {string} codigo - String contendo apenas d√≠gitos
             * @return {number} - Soma dos produtos de todos os subconjuntos
             */
            function resolverEnigma(codigo) {
                // Array para armazenar todos os subconjuntos poss√≠veis
                const subconjuntos = [];

                // Gerar todos os subconjuntos poss√≠veis
                for (let i = 0; i < codigo.length; i++) {
                    for (let j = i; j < codigo.length; j++) {
                        // Extrair o subconjunto do √≠ndice i at√© j
                        const subconjunto = codigo.substring(i, j + 1);
                        subconjuntos.push(subconjunto);
                    }
                }

                // Calcular o produto de cada subconjunto e somar
                let somaTotal = 0;

                for (const subconjunto of subconjuntos) {
                    // Converter cada d√≠gito para n√∫mero e calcular o produto
                    let produto = 1;

                    for (let i = 0; i < subconjunto.length; i++) {
                        produto *= parseInt(subconjunto[i]);
                    }

                    // Adicionar o produto √† soma total
                    somaTotal += produto;
                }

                return somaTotal;
            }
        });
    </script>
</body>

</html>